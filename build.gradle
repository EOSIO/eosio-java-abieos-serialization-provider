plugins {
    id 'java-library'
    id 'cpp'
}

group 'one.block.eosiojavaabieosserializationprovider'
version '1.0-SNAPSHOT'

repositories {
    jcenter()
    mavenCentral()
}

sourceCompatibility = 1.8
targetCompatibility = 1.8

dependencies {
    implementation fileTree(include: ['*.jar', "*.dylib", "*.so"], dir: 'libs')
    testCompile group: 'junit', name: 'junit', version: '4.12'
    implementation group: 'org.json', name: 'json', version: '20200518'
    implementation 'one.block:eosiojava:0.1.2'
    implementation 'org.jetbrains:annotations:17.0.0'
}

test {
    systemProperty "java.library.path", file("${project(":eosiojavaabieos").buildDir}/lib/main/debug").absolutePath
}

test.dependsOn ':eosiojavaabieos:linkDebug'

task gitSubmodulesUpdate {
    exec {
        commandLine 'git', 'submodule', 'update', '--init', '--recursive'
    }
}
clean.dependsOn 'gitSubmodulesUpdate'